<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>23plusone Research | Intro · SWLS · WHO-5</title>
  <link rel="stylesheet" href="styles/tw.build.css">
  <!-- Google Fonts: Poppins to match scan.html -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script>window.RESEARCH_MODE = true;</script>
  <script src="scripts/viewport.js"></script>
  <style>
    :root { --footer-h: 64px; --btn-active-pink: #c2185b; }
    html, body { height: calc(var(--vh, 1vh) * 100); overflow: hidden; }
    body { font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
    .section { height: calc(var(--vh, 1vh) * 100 - var(--footer-h)); display: none; width: 100%; }
    /* When embedding the scan (iframe), footer is hidden → use full viewport height */
    #scanHost.section { height: calc(var(--vh, 1vh) * 100); }
    .active { display: flex; }
    .qcard { width: 100%; max-width: 1100px; margin-left: auto; margin-right: auto; padding-left: 24px; padding-right: 24px; }
    .qgrid { width: 100%; display: grid; row-gap: 24px; column-gap: var(--col-gap, 24px); }
    /* Desktop: keep labels on one line by giving first column more space */
    /* Unified column geometry across SWLS (7) and WHO-5 (6) */
    .likert-7 { grid-template-columns: minmax(460px, 2fr) repeat(7, minmax(64px, 1fr)); }
    .likert-6 { grid-template-columns: minmax(460px, 2fr) repeat(6, minmax(64px, 1fr)); }
    .cell-h { font-size: 12px; color: #9c8078; text-align: center; line-height: 1.15; }
    .cell-l { font-size: 16px; color: #e91e63; white-space: nowrap; text-align: left; }
    .choice { width: 22px; height: 22px; border-radius: 9999px; border: 2px solid #b98c86; margin-left: auto; margin-right: auto; display: inline-flex; align-items: center; justify-content: center; position: relative; background: #fff; transition: border-color 120ms ease, box-shadow 120ms ease; }
    .choice.active { background-color: #fff; border-color: #e91e63; }
    .choice.active::after { content: ""; position: absolute; inset: 4px; background-color: #e91e63; border-radius: 9999px; }
    .choice:focus-visible { outline: 3px solid rgba(226, 0, 122, 0.35); outline-offset: 3px; }
    /* Lower the submit buttons on both tests */
    #toWho5, #toScan { margin-top: 20px; }
    @media (min-width: 768px) { #toWho5, #toScan { margin-top: 36px; } }
    /* Primary buttons to match scan.html */
    button { -webkit-tap-highlight-color: transparent; transition: background-color 120ms ease, transform 60ms ease; }
    #toSwlsIntro:active, #toWho5:active, #toScan:active { background-color: var(--btn-active-pink); transform: translateY(1px); }
    /* Compact layout for small tablets/large phones in landscape (481–660px) */
    @media (min-width: 481px) and (max-width: 660px) {
      .qcard { padding-left: 12px; padding-right: 12px; }
      .qgrid { column-gap: 8px; row-gap: 14px; }
      /* SWLS: seven columns + label */
      .likert-7 { grid-template-columns: minmax(180px, 2fr) repeat(7, minmax(30px, 1fr)); }
      /* WHO-5: six columns + label */
      .likert-6 { grid-template-columns: minmax(180px, 2fr) repeat(6, minmax(32px, 1fr)); }
      .cell-l { font-size: 14px; }
      .cell-h { font-size: 11px; line-height: 1.15; }
      .choice { width: 18px; height: 18px; }
      .choice.active::after { inset: 3px; }
    }
    /* Medium screens: tighten grid so all columns fit (769px–1100px) */
    @media (min-width: 769px) and (max-width: 1100px) {
      /* Match the comfortable 720px layout up through 1100px */
      .qgrid { column-gap: 12px; row-gap: 18px; }
      .likert-7 { grid-template-columns: minmax(240px, 2.4fr) repeat(7, minmax(42px, 1fr)); }
      .likert-6 { grid-template-columns: minmax(220px, 2.4fr) repeat(6, minmax(40px, 1fr)); }
      .cell-h { white-space: normal !important; line-height: 1.2; }
    }
    /* On small screens, allow wrapping so layout fits */
    @media (max-width: 768px) {
      .qgrid { column-gap: 12px; row-gap: 18px; }
      /* Give labels more room and ensure each dot column has a min width */
      .likert-7 { grid-template-columns: minmax(240px, 2.4fr) repeat(7, minmax(42px, 1fr)); }
      .likert-6 { grid-template-columns: minmax(220px, 2.4fr) repeat(6, minmax(40px, 1fr)); }
      .cell-l { white-space: normal; word-break: normal; }
      .cell-h { white-space: normal; line-height: 1.2; }
      /* Reset desktop left offset for first choice column */
      /* Ensure consistent centering for all choice dots on mobile */
      .qgrid .choice { margin-left: auto; margin-right: auto; }
      /* SWLS header: show only anchor labels on mobile (keep column space) */
      #swls .qgrid.likert-7.mb-4 > :nth-child(3),
      #swls .qgrid.likert-7.mb-4 > :nth-child(4),
      #swls .qgrid.likert-7.mb-4 > :nth-child(6),
      #swls .qgrid.likert-7.mb-4 > :nth-child(7) { visibility: hidden; }
      /* WHO-5 header: show At no time, Half the time, All the time (keep column space) */
      #who5 .qgrid.likert-6.mb-4 > :nth-child(3),
      #who5 .qgrid.likert-6.mb-4 > :nth-child(5),
      #who5 .qgrid.likert-6.mb-4 > :nth-child(6) { visibility: hidden; }
      /* Replace middle header text with concise 'Half the time' */
      #who5 .qgrid.likert-6.mb-4 > :nth-child(4) { position: relative; color: transparent; }
      #who5 .qgrid.likert-6.mb-4 > :nth-child(4)::after { content: "Half the\A time"; white-space: pre; color: #6b7280; position: absolute; inset: 0; display: block; text-align: center; }
      /* Lower submit buttons a touch on mobile */
      #toWho5, #toScan { margin-top: 28px; }
    }
    /* On desktop, keep header labels at two lines max (breaks only at <br>) */
    @media (min-width: 900px) {
      .cell-h { white-space: nowrap; }
    }
    @media (max-width: 480px) {
      :root { --footer-h: 48px; }
      .qcard { max-width: 560px; padding-left: 12px; padding-right: 12px; }
      .qgrid { column-gap: 6px; row-gap: 14px; }
      /* Ensure all six dots fit on very small screens */
      .likert-6 { grid-template-columns: minmax(112px, 2fr) repeat(6, minmax(24px, 1fr)); }
      /* Ensure all seven dots fit for SWLS */
      .likert-7 { grid-template-columns: minmax(112px, 2fr) repeat(7, minmax(24px, 1fr)); }
      .cell-l { font-size: 14px; }
      .choice { width: 18px; height: 18px; }
      .choice.active::after { inset: 3px; }
    }
  </style>
</head>
<body class="bg-white text-[#2c1f1c]">
  <main class="min-h-screen flex flex-col items-center" style="padding-bottom: var(--footer-h);">
    <!-- Intro -->
    <section id="intro" class="section active items-center justify-center">
      <div class="qcard flex flex-col items-center gap-4 text-center">
        <h2 class="text-2xl md:text-3xl font-semibold">Help us research methods that measure happiness.</h2>
        <p class="text-base opacity-80">This test is anonymous and consists of three parts:</p>
        <div class="text-sm">
          <div class="font-semibold text-pink-600">Satisfaction</div>
          <div class="font-semibold text-pink-600">Well‑being</div>
          <div class="font-semibold text-pink-600">Human drives</div>
        </div>
        <button id="toSwlsIntro" class="w-[200px] h-[56px] bg-pink-600 rounded-xl text-white text-lg font-semibold shadow-sm">Continue</button>
      </div>
    </section>

    <!-- SWLS -->
    <section id="swls" class="section items-center justify-center">
      <div class="qcard flex flex-col items-center gap-8 text-center">
        <div class="max-w-[800px]">
          <h2 class="text-2xl font-semibold">Please choose the number that best matches how much you agree.</h2>
          <p class="text-sm opacity-80">Use the scale from 1 (Strongly disagree) to 7 (Strongly agree).</p>
        </div>
        <div class="w-full text-left" style="margin-top: 20px;">
          <div class="qgrid likert-7 mb-4" style="margin-bottom: 20px;">
            <div></div>
            <div class="cell-h">Strongly<br>disagree</div>
            <div class="cell-h">Disagree</div>
            <div class="cell-h">Slightly<br>disagree</div>
            <div class="cell-h">Neutral</div>
            <div class="cell-h">Slightly<br>agree</div>
            <div class="cell-h">Agree</div>
            <div class="cell-h">Strongly<br>agree</div>
          </div>
          <div id="swlsForm" class="w-full flex flex-col gap-6"></div>
        </div>
        <button id="toWho5" class="w-[200px] h-[56px] bg-pink-600 rounded-xl text-white text-lg font-semibold shadow-sm">Submit</button>
      </div>
    </section>

    <!-- WHO-5 -->
    <section id="who5" class="section items-center justify-center">
      <div class="qcard flex flex-col items-center gap-8 text-center">
        <div class="max-w-[860px]">
          <h2 class="text-2xl font-semibold">Please tick the box corresponding to how you felt in the last two weeks.</h2>
          <p class="text-sm opacity-80">Use the scale from 1 (At no time) to 6 (All the time).</p>
        </div>
        <div class="w-full text-left" style="margin-top: 20px;">
          <div class="qgrid likert-6 mb-4" style="margin-bottom: 20px;">
            <div></div>
            <div class="cell-h">At no<br>time</div>
            <div class="cell-h">Some of the<br>time</div>
            <div class="cell-h">Less than half<br>the time</div>
            <div class="cell-h">More than half<br>the time</div>
            <div class="cell-h">Most of the<br>time</div>
            <div class="cell-h">All of the<br>time</div>
          </div>
          <div id="who5Form" class="w-full flex flex-col gap-6"></div>
        </div>
        <button id="toScan" class="w-[200px] h-[56px] bg-pink-600 rounded-xl text-white text-lg font-semibold shadow-sm">Submit</button>
      </div>
    </section>

    <!-- Reuse existing scan via iframe to avoid code duplication -->
    <section id="scanHost" class="section items-center justify-center">
      <iframe id="scanFrame" src="scan.html" title="Happiness Scan" style="width:100%; height:100%; border:0;"></iframe>
    </section>
  </main>

  <footer id="globalFooter" class="fixed bottom-0 left-0 right-0 bg-white border-t border-neutral-200">
    <div class="w-full grid items-center text-yellow-950 text-xs px-6 md:px-16" style="height: 100%; grid-template-columns: 1fr auto 1fr;">
      <div class="opacity-80 flex items-center h-full" style="justify-self: start;"><img src="Br-ndLogo.webp" alt="BR-ND People logo" class="w-auto" style="height: auto; width: auto; max-height: calc(var(--footer-h) - 12px);"></div>
      <div class="opacity-80" style="justify-self: center;">© 2006-2025 Cramer & Koene</div>
      <div class="opacity-80 flex items-center h-full" style="justify-self: end;"><img src="23plusone.png" alt="23plusone logo" class="w-auto" style="height: auto; width: auto; max-height: calc((var(--footer-h) - 12px) * 0.55);"></div>
    </div>
  </footer>

  <!-- Templates for dynamic rendering -->
  <template id="swlsRow">
    <div class="qgrid likert-7 items-center">
      <label class="cell-l"></label>
      <button type="button" class="choice" data-val="1" aria-label="1"></button>
      <button type="button" class="choice" data-val="2" aria-label="2"></button>
      <button type="button" class="choice" data-val="3" aria-label="3"></button>
      <button type="button" class="choice" data-val="4" aria-label="4"></button>
      <button type="button" class="choice" data-val="5" aria-label="5"></button>
      <button type="button" class="choice" data-val="6" aria-label="6"></button>
      <button type="button" class="choice" data-val="7" aria-label="7"></button>
    </div>
  </template>

  <template id="who5Row">
    <div class="qgrid likert-6 items-center">
      <label class="cell-l"></label>
      <button type="button" class="choice" data-val="0" aria-label="At no time"></button>
      <button type="button" class="choice" data-val="1" aria-label="Some of the time"></button>
      <button type="button" class="choice" data-val="2" aria-label="Less than half the time"></button>
      <button type="button" class="choice" data-val="3" aria-label="More than half the time"></button>
      <button type="button" class="choice" data-val="4" aria-label="Most of the time"></button>
      <button type="button" class="choice" data-val="5" aria-label="All of the time"></button>
    </div>
  </template>

  <script src="scripts/research.js" defer></script>
</body>
</html>


