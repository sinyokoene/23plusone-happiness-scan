<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Research Results</title>
  <link rel="stylesheet" href="styles/tw.build.css">
  <style>
    html, body { height: 100%; }
    body { font-family: Poppins, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
    .container { max-width: 1200px; margin: 0 auto; padding: 24px; }
    .card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 16px; }
    .grid { display: grid; grid-template-columns: repeat(12, 1fr); gap: 16px; }
    .col-6 { grid-column: span 6; }
    .col-12 { grid-column: span 12; }
    canvas { width: 100%; height: 320px; }
    table { width: 100%; border-collapse: collapse; }
    th, td { border-bottom: 1px solid #eee; padding: 8px; text-align: left; font-size: 12px; }
  </style>
  <script>window.RESEARCH_RESULTS = true;</script>
</head>
<body class="bg-white text-[#2c1f1c]">
  <main class="container">
    <div class="flex items-center justify-between mb-4">
      <img src="Br-ndLogo.webp" alt="BR-ND People" style="height:48px; width:auto;" />
      <h1 class="text-2xl font-semibold">Research Results</h1>
      <img src="23plusone.png" alt="23plusone" style="height:22px; width:auto;" />
    </div>
    <div class="card mb-4">
      <p class="text-sm opacity-80">
        The bar charts show the <strong>distribution</strong> of responses: how many people scored within each range.
        The scatter charts compare questionnaire totals against the scan’s <strong>IHS</strong> score (Intrinsic Happiness Score).
        In the scatter plots, the <strong>X‑axis</strong> is the questionnaire total (WHO‑5% or SWLS 5–35) and the <strong>Y‑axis</strong> is IHS (0–100).
        The thin line is a simple trend line (ordinary least squares); the caption shows correlation <em>r</em>, p‑value, and slope.
      </p>
      <div class="mt-3 grid" style="grid-template-columns: repeat(12, 1fr); gap: 12px;">
        <div class="col-12 card" style="background:#fafafa;">
          <h3 class="text-base font-semibold mb-2">How to read these results (simple)</h3>
          <ul class="text-sm leading-relaxed list-disc pl-6">
            <li><strong>Correlation (r)</strong>: shows whether two things move together. r near <strong>+1</strong> = higher X goes with higher Y; near <strong>0</strong> = no clear link; near <strong>-1</strong> = higher X goes with lower Y.</li>
            <li><strong>N1 / N2 / N3</strong>: three parts of your scan score.
              <ul class="list-disc ml-4">
                <li><strong>N1</strong>: how many “Yes” responses and how quickly (time‑weighted affirmations).</li>
                <li><strong>N2</strong>: coverage — how many different domains you affirmed.</li>
                <li><strong>N3</strong>: balance — how evenly those “Yes” answers are spread across domains.</li>
              </ul>
            </li>
            <li><strong>N1/N2/N3 vs WHO‑5</strong> (scatter): each dot is one person. X = WHO‑5 well‑being (0–100), Y = N1/N2/N3 score. A rising line and positive r means that component tends to be higher for people with higher WHO‑5.</li>
            <li><strong>Domain table</strong>:
              <ul class="list-disc ml-4">
                <li><strong>r(affirm, WHO‑5/SWLS)</strong>: uses time‑weighted “Yes” strength in a domain. Higher r = that domain aligns more with well‑being.</li>
                <li><strong>r(yes‑rate, WHO‑5/SWLS)</strong>: simpler percent “Yes” per domain. Similar meaning, but without timing weight.</li>
              </ul>
            </li>
            <li><strong>Top/Bottom cards</strong>: cards ranked by how their Yes/No answers align with WHO‑5. Top = cards more often endorsed by higher‑well‑being people; Bottom = the opposite (or neutral).</li>
            <li><strong>Important</strong>: correlation is <em>not</em> causation. These views show alignment, not proof that cards cause well‑being.</li>
          </ul>
        </div>
      </div>
    </div>
    <div class="grid">
      <div class="col-12">
        <div class="card"><h2 class="text-xl font-semibold">Distributions</h2></div>
      </div>
      <div class="col-6">
        <div class="card">
          <h2 class="text-lg font-semibold mb-2">WHO‑5 Distribution</h2>
          <canvas id="who5Chart"></canvas>
        </div>
      </div>
      <div class="col-6">
        <div class="card">
          <h2 class="text-lg font-semibold mb-2">SWLS Distribution</h2>
          <canvas id="swlsChart"></canvas>
        </div>
      </div>
      <div class="col-6">
        <div class="card">
          <h2 class="text-lg font-semibold mb-2">Cantril Distribution</h2>
          <canvas id="cantrilChart"></canvas>
        </div>
      </div>
      <div class="col-12">
        <div class="card"><h2 class="text-xl font-semibold">Vs IHS</h2></div>
      </div>
      <div class="col-6">
        <div class="card">
          <h2 class="text-lg font-semibold mb-2">WHO‑5 vs IHS (scatter)</h2>
          <canvas id="who5VsIhs"></canvas>
        </div>
      </div>
      <div class="col-6">
        <div class="card">
          <h2 class="text-lg font-semibold mb-2">SWLS vs IHS (scatter)</h2>
          <canvas id="swlsVsIhs"></canvas>
        </div>
      </div>
      <div class="col-6">
        <div class="card">
          <h2 class="text-lg font-semibold mb-2">Cantril vs IHS (scatter)</h2>
          <canvas id="cantrilVsIhs"></canvas>
        </div>
      </div>
      <div class="col-6">
        <div class="card">
          <h2 class="text-lg font-semibold mb-2">N1/N2/N3 vs WHO‑5 (scatter)</h2>
          <canvas id="n123VsWho5"></canvas>
        </div>
      </div>
      <div class="col-12">
        <div class="card">
          <div class="grid">
            <div class="col-6">
              <div id="statsWho5" class="text-sm"></div>
            </div>
            <div class="col-6">
              <div id="statsSwls" class="text-sm"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12">
        <div class="card">
          <h2 class="text-lg font-semibold mb-2">Domain Correlations (WHO‑5/SWLS)</h2>
          <div style="overflow:auto;">
            <table id="domainCorrTable">
              <thead>
                <tr>
                  <th>Domain</th>
                  <th>r(affirm, WHO‑5)</th>
                  <th>r(affirm, SWLS)</th>
                  <th>r(yes‑rate, WHO‑5)</th>
                  <th>r(yes‑rate, SWLS)</th>
                  <th>n</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="col-12">
        <div class="card">
          <h2 class="text-lg font-semibold mb-2">Top/Bottom Cards by Correlation</h2>
          <div class="grid">
            <div class="col-6">
              <h3 class="font-medium mb-1">Top 10 (WHO‑5)</h3>
              <table id="cardTopWho"><thead><tr><th>Card</th><th>r yes</th><th>n</th></tr></thead><tbody></tbody></table>
            </div>
            <div class="col-6">
              <h3 class="font-medium mb-1">Bottom 10 (WHO‑5)</h3>
              <table id="cardBottomWho"><thead><tr><th>Card</th><th>r yes</th><th>n</th></tr></thead><tbody></tbody></table>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12">
        <div class="card">
          <div class="flex items-center justify-between mb-2">
            <h2 class="text-lg font-semibold">Latest Entries</h2>
            <label class="text-sm opacity-80">Limit <input id="limitInput" type="number" value="200" class="border rounded px-2 py-1 w-20"></label>
          </div>
          <div style="overflow:auto; max-height: 420px;">
            <table id="resultsTable">
              <thead><tr><th>ID</th><th>Created</th><th>Session</th><th>WHO‑5</th><th>SWLS</th><th>Cantril</th><th>IHS</th></tr></thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </main>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jstat@1.9.6/dist/jstat.min.js"></script>
  <script src="scripts/research-results.js" defer></script>
  </body>
  </html>


